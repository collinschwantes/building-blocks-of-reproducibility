---
title: "Building Blocks of Reproducibility"
subtitle: "Part 2: Version control and collabortaion<br>with GIT and Github"
author: "Collin Schwantes"
date: "2022-06-14"
output: 
  ehastyle::eha_avenir_pptx
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
library(officedown)
library(ggplot2)
library(rvg)
library(ggraph)
library(ehastyle)
library(dplyr)
library(igraph)
```

## Problem statement

Writing code for research purposes necessarily involves exploring data and analyses to gain understanding. It also often involves collaboration. Both collaboration and exploration can increase entropy in your code base through undocumented changes, swelling the number of files, and bespoke systems for understanding which is the correct file. 

I am using the right file? Did we include the most up to date figure in the paper? What exactly did I change in that file and why? 

## Solution

### Use a version control system:

- organize
- track
- share
- harmonize



In order for the outputs of collaboration and exploration to be reproducible, you need to have a system for organizing, tracking, sharing, and harmonizing code. A version control system  allows you and your collaborators to document specific changes in the code, harmonize code from multiple contributors, and explore new ways of analyzing your data without ballooning the number of files. 

## Version control and collabortaion with GIT and Github

*GIT* - Distributed Version Control System

*Github* - A GIT based collaboration platform and remote code repository


## What is GIT?

![xkcd comic about git](https://imgs.xkcd.com/comics/git.png)

## What is GIT?

```{r echo=FALSE}

git_df <- data.frame(from = c(1,2,4,2,3,5,4,7),
                     to = c(2,4,6,3,5,6,7,8),
                     branch = c(rep("main",3),rep("feature",3),rep("fix",2))
                     )

graph <- graph_from_data_frame(git_df) %>% 
  set_vertex_attr("commit",value = sprintf("Commit %s",c("4d52","a7da","6895","b85f","039e","85a9","0f9b")))  %>% 
  set_vertex_attr("commit_msg",value = sprintf("%s",c("First Commit","added analysis 1","Manage analysis outputs","plotting function","adding error visualization","fixed typo in file path","Merge plotting function","using here package")))



# Not specifying the layout - defaults to "auto"
graph_obj <- ggraph(graph) + 
    geom_edge_link(aes(colour = branch), width= 3) + 
    geom_node_point(size = 30) +
    geom_node_label(aes(label = commit_msg), repel = FALSE) +
  theme_void() +
  scale_y_reverse() +
  coord_flip() 

dml(ggobj = graph_obj)
```



## What is GIT?

```{r echo=FALSE}


# Not specifying the layout - defaults to "auto"
graph_obj <- ggraph(graph) + 
    geom_edge_link(aes(colour = branch), width= 3) + 
    geom_node_point(size = 30) +
    geom_node_label(aes(label = commit), repel = FALSE) +
  theme_void() +
  scale_y_reverse() +
  coord_flip() 

dml(ggobj = graph_obj)
```

## To Review

1)  Use an IDE like Rstudio   
2)  Always start from a blank slate (save source not sessions)  
3)  Use projects and relative paths  
4)  Keep your code organized (avoid spaghetti code)  
5)  Leave yourself notes (literate programming) 

 
##Thanks!


## R Markdown

This is an R Markdown presentation. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document.

## Slide with Bullets

- Bullet 1
- Bullet 2
- Bullet 3

## Slide with R Output

```{r cars, echo = TRUE}
summary(cars)
```

## Slide with Table

```{r iristable}
head(iris)
```
## Slide to the Right 

:::::: {.columns}
::: {.column}
Use `layout='Two Content', ph=officer::ph_location_right()` 
to properly place content 
:::

::: {.column}

```{r righttable, layout='Two Content',ph=officer::ph_location_right()}
head(cars,10)
```
:::
::::::

## Slide to the left 

:::::: {.columns}
::: {.column}
```{r layout='Two Content', ph=officer::ph_location_left()}
head(cars)
```
:::

::: {.column}
- Left side table
:::
::::::

##  Slide with SVG Plot

```{r pressure}
## use dml to make the plot an editable svg in ppt
dml(plot(pressure))
```

## Slide with SVG Ggplot

```{r }
ggplotObj <- ggplot(mtcars, aes(wt, mpg), col = displ) +
  geom_point()

## pass a ggplot object to dml 
dml(ggobj = ggplotObj)
```
